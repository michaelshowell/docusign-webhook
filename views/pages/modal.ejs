<!DOCTYPE html>
<html lang="en">
<head>
  <title>API Certification | DocuSign</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <style type="text/css" media="all">
  .keep-linefeed{
    white-space:pre-wrap;
  }
  .modal {
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
  }
  .modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
  }
  </style>
</head>
<body>
  <h3>Thank you for requesting API certification! The certification process will take few minutes to resume.</h3>
  <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
  <script type="text/javascript">
   var socket = io();
  socket.on('kazmon logs', function(messages) {
    if (!!messages) {
      var html = '<div id="myDIV"><h1>Report</h1>';
      //$.each(messages, function() {
      //  html += this + '<br/>';
      //});
      html += messages;
      html += '<br/><br/></div><div id="Searching_Modal" style="display:none"></div>';
      document.write(html);
    } else {
      document.write('<div id="myDIV"><h1>Report</h1>No results for the selected time window!<br/><br/></div><div id="Searching_Modal" style="display:none"></div>');
    }
    document.getElementById("myDIV").style.whiteSpace = "pre-wrap";
  });
  socket.on('checks results', function(message) {
    var html = '<div id="Searching_Modal" class="modal" tabindex="-1" role="dialog" data-keyboard="false"\
    data-backdrop="static" style="width: 100%; top:50%; position: fixed; z-index: 1; padding-top: 100px; height: 100%; overflow: auto; display: block">\
    <div class="modal-dialog">\
    <div class="modal-content" style="background-color: cyan; margin: auto; padding: 20px; border: 1px solid #888; width: 80%">\
    <a id="close-btn" onclick="$(\'#Searching_Modal\').hide()" title="Close" style="float: right; font-size: 21px; font-weight: 700; line-height: 1">X</a>\
    <div class="modal-header" style="text-align: center; white-space: pre-wrap">';
    html += message + '</div></div></div>';
    document.getElementById("Searching_Modal").outerHTML = html;
    $('#Searching_Modal').show();
  });

  $(document).ready(function(){
    $('#Searching_Modal').show();
  });
  </script>
  <div id="Searching_Modal" class="modal" tabindex="-1" role="dialog" data-keyboard="false"
  data-backdrop="static" style="width: 100%; position:unset; top:50%">
  <div class="modal-dialog">
    <div class="modal-content">
     <a hidden id="close-btn" onclick="$('#Searching_Modal').hide()" title="Close" class="close">X</a>
     <div class="modal-header" style="text-align: center">
       <center><h3 id="modal-text">This operation will take few minutes. Please wait...</h3></center>
     </div>
     <div class="modal-body" >
      <div class="progress progress-striped active">
        <div class="progress-bar"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal-footer" style="text-align: center"></div>   
</body>
</html>
